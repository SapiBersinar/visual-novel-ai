/* Gaya Dasar & Variabel Tema */
body {
    font-family: 'Inter', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 1.5rem; /* Setara dengan 'p-6' Tailwind */
    box-sizing: border-box;
    overflow-x: hidden;
    /* Transisi dihapus karena tidak ada lagi pergantian tema */
}

/* Variabel Tema Hitam dan Putih */
body.bw-theme {
    --bg-color: #f8f8f8; /* Latar belakang putih gading */
    --container-bg: #ffffff; /* Kontainer putih murni */
    --text-color: #1a1a1a; /* Abu-abu sangat gelap untuk teks utama */
    --sub-text-color: #4a4a4a; /* Abu-abu gelap untuk teks sekunder */
    --light-text-color: #777777; /* Abu-abu sedang untuk teks terang */
    --border-color: #cccccc; /* Batas abu-abu muda */
    --shadow-color: rgba(0, 0, 0, 0.2); /* Bayangan lebih gelap */
    --title-color: #000000; /* Hitam murni untuk judul */
    --title-shadow-color: rgba(0, 0, 0, 0.05);

    --input-bg: #eeeeee; /* Latar belakang input abu-abu muda */
    --input-border: #999999; /* Batas input abu-abu sedang */
    --input-text: #1a1a1a; /* Teks gelap di input */
    --input-placeholder: #777777; /* Placeholder abu-abu */

    --btn-primary-bg: #333333; /* Tombol utama abu-abu gelap */
    --btn-primary-text: #ffffff;
    --btn-primary-hover-bg: #000000; /* Hover hitam untuk tombol utama */
    --btn-primary-shadow: rgba(0, 0, 0, 0.3);

    --btn-success-bg: #555555; /* Tombol sukses abu-abu sedang */
    --btn-success-text: #ffffff;
    --btn-success-hover-bg: #333333; /* Hover abu-abu gelap untuk sukses */
    --btn-success-shadow: rgba(0, 0, 0, 0.25);

    --btn-secondary-bg: #cccccc; /* Tombol sekunder abu-abu muda */
    --btn-secondary-text: #1a1a1a;
    --btn-secondary-hover-bg: #999999; /* Hover abu-abu sedang untuk sekunder */
    --btn-secondary-shadow: rgba(0, 0, 0, 0.15);

    --loading-spinner-color: #666666; /* Spinner abu-abu */
    --card-bg: #ffffff; /* Latar belakang kartu putih */
    --card-border: #bbbbbb; /* Batas kartu abu-abu muda */
    --card-shadow: rgba(0, 0, 0, 0.1);

    --dialogue-mc-bg: #e0e0e0; /* Abu-abu muda untuk dialog MC */
    --dialogue-mc-border: #999999; /* Batas abu-abu sedang */
    --dialogue-mc-speaker: #333333; /* Nama pembicara abu-abu lebih gelap */

    --dialogue-other-bg: #f0f0f0; /* Abu-abu sedikit lebih terang untuk dialog lain */
    --dialogue-other-border: #cccccc; /* Batas abu-abu muda */
    --dialogue-other-speaker: #555555; /* Nama pembicara abu-abu sedang */

    --choice-card-bg: #eeeeee; /* Kartu pilihan abu-abu muda */
    --choice-card-border: #888888; /* Batas pilihan abu-abu lebih gelap */
    --choice-card-shadow: rgba(0, 0, 0, 0.15);

    --system-display-bg: #f5f5f5; /* Tampilan sistem abu-abu sangat muda */
    --system-display-border: #dddddd; /* Batas sistem abu-abu muda */
    --system-title-color: #333333; /* Judul sistem abu-abu gelap */

    --positive-color: #338833; /* Hijau gelap untuk positif */
    --negative-color: #aa3333; /* Merah gelap untuk negatif */
    --neutral-color: #cc9900; /* Kuning/oranye gelap untuk netral */
}

/* Terapkan variabel tema ke elemen inti */
body {
    background-color: var(--bg-color);
    color: var(--text-color);
}

/* Kontainer Utama */
.main-container {
    background-color: var(--container-bg);
    border-color: var(--border-color);
    box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -2px var(--shadow-color); /* Mirip shadow-xl Tailwind */
    /* Transisi dihapus */
}

/* Kelas Dasar Layar */
.screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%; /* Memastikan mengambil lebar penuh dalam kontainer */
}

/* Judul */
h1 {
    color: var(--title-color);
    text-shadow: 2px 2px 0px var(--title-shadow-color); /* Bayangan teks samar */
    /* Transisi dihapus */
}

h2 {
    color: var(--text-color);
    text-shadow: 1px 1px 0px var(--title-shadow-color); /* Bayangan teks samar */
    /* Transisi dihapus */
}

/* Elemen Formulir (Input, Textarea, Select) */
.form-input, .form-select {
    border: 1px solid var(--input-border);
    background-color: var(--input-bg);
    color: var(--input-text);
    transition: all 0.2s ease-in-out;
}

.form-input::placeholder,
textarea::placeholder {
    color: var(--input-placeholder);
}

.form-input:focus,
.form-select:focus {
    border-color: var(--btn-primary-bg); /* Gunakan warna tombol utama untuk fokus */
    outline: none; /* Hapus outline default */
    box-shadow: 0 0 0 3px rgba(102, 102, 102, 0.3); /* Gaya fokus cincin abu-abu */
}

/* Panah kustom untuk select */
.form-select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url('data:image/svg+xml;utf8,<svg fill="%23777777" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>'); /* Abu-abu untuk panah */
    background-repeat: no-repeat;
    background-position: right 1rem center; /* Disesuaikan untuk padding lebih besar */
    padding-right: 2.5rem; /* Ruang untuk panah kustom */
}

/* Tombol */
.btn {
    border: 1px solid var(--btn-primary-bg); /* Batas default dari primer */
    transition: all 0.2s ease-in-out;
    position: relative;
    overflow: hidden;
}

.btn-primary {
    background-color: var(--btn-primary-bg);
    color: var(--btn-primary-text);
    box-shadow: 0 4px 6px -1px var(--btn-primary-shadow), 0 2px 4px -2px var(--btn-primary-shadow); /* Mirip shadow-md Tailwind */
    border-color: var(--btn-primary-bg);
}
.btn-primary:hover {
    background-color: var(--btn-primary-hover-bg);
    box-shadow: 0 10px 15px -3px var(--btn-primary-shadow), 0 4px 6px -4px var(--btn-primary-shadow); /* Mirip shadow-lg Tailwind */
    transform: translateY(-2px);
}

.btn-success {
    background-color: var(--btn-success-bg);
    color: var(--btn-success-text);
    box-shadow: 0 4px 6px -1px var(--btn-success-shadow), 0 2px 4px -2px var(--btn-success-shadow);
    border-color: var(--btn-success-bg);
}
.btn-success:hover {
    background-color: var(--btn-success-hover-bg);
    box-shadow: 0 10px 15px -3px var(--btn-success-shadow), 0 4px 6px -4px var(--btn-success-shadow);
    transform: translateY(-2px);
}

.btn-secondary {
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
    box-shadow: 0 4px 6px -1px var(--btn-secondary-shadow), 0 2px 4px -2px var(--btn-secondary-shadow);
    border-color: var(--btn-secondary-bg);
}
.btn-secondary:hover {
    background-color: var(--btn-secondary-hover-bg);
    box-shadow: 0 10px 15px -3px var(--btn-secondary-shadow), 0 4px 6px -4px var(--btn-secondary-shadow);
    transform: translateY(-2px);
}

/* Grup Radio */
.radio-group label {
    color: var(--sub-text-color);
}
.radio-group input[type="radio"] {
    border-color: var(--input-border);
    background-color: var(--input-bg);
}
.radio-group input[type="radio"]::before {
    box-shadow: inset 1em 1em var(--btn-primary-bg); /* Gunakan warna tombol utama untuk status tercentang */
}

/* Indikator Memuat & Spinner */
.loading-indicator {
    color: var(--sub-text-color);
}
.loading-indicator .spinner {
    border: 4px solid var(--input-border); /* Gunakan batas input sebagai dasar */
    border-top: 4px solid var(--loading-spinner-color); /* Warna spinner */
}
.loading-indicator span { /* Berlaku untuk loading-text dan loading-additional-text */
    color: var(--sub-text-color);
}
.loading-indicator #loading-additional-text {
    color: var(--light-text-color);
}

/* Gaya Kartu Memuat Baru (untuk game-loading-overlay) */
.loading-card {
    background-color: var(--container-bg);
    border-color: var(--border-color);
    box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -2px var(--shadow-color);
}
.loading-card .spinner {
    border: 4px solid var(--input-border);
    border-top: 4px solid var(--loading-spinner-color);
}
.loading-card span { /* Untuk teks di dalam loading-card */
    color: var(--sub-text-color);
}

/* Gaya Kartu (Bagian Cerita, Karakter, Ringkasan) */
.story-card, .character-card, .summary-card {
    background-color: var(--card-bg);
    border: 1px solid var(--card-border);
    box-shadow: 0 1px 3px 0 var(--card-shadow), 0 1px 2px 0 var(--card-shadow); /* Mirip shadow-sm Tailwind */
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, border-color 0.2s ease-in-out, background-color 0.3s ease;
}
.story-card:hover, .character-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 6px -1px var(--card-shadow), 0 2px 4px -2px var(--card-shadow); /* Mirip shadow-md Tailwind */
}
.story-card.selected {
    border-color: var(--btn-primary-bg);
    box-shadow: 0 10px 15px -3px rgba(51, 51, 51, 0.3), 0 4px 6px -4px rgba(51, 51, 51, 0.3); /* Bayangan abu-abu gelap untuk pilihan */
}

/* Kartu Karakter Terpilih */
.character-card.selected-mc {
    border-color: var(--btn-success-bg); /* Batas abu-abu sedang untuk MC terpilih */
    background-color: var(--dialogue-mc-bg); /* Latar belakang abu-abu muda untuk dialog MC */
    box-shadow: 0 10px 15px -3px rgba(85, 85, 85, 0.3), 0 4px 6px -4px rgba(85, 85, 85, 0.3); /* Bayangan abu-abu sedang */
}
.character-card h2 {
    color: var(--text-color);
}
.character-card p {
    color: var(--sub-text-color);
}
.char-detail {
    color: var(--text-color); /* Pastikan label detail menonjol */
}

/* Kotak Pesan Kustom */
.message-box { /* Latar belakang overlay */
    background-color: rgba(0, 0, 0, 0.5); /* Hitam semi-transparan */
}
.message-box-content {
    background-color: var(--container-bg);
    border-color: var(--border-color);
    box-shadow: 0 20px 25px -5px var(--shadow-color), 0 10px 10px -5px var(--shadow-color); /* Mirip shadow-2xl Tailwind */
}
.message-box-content h3 {
    color: var(--title-color);
}
.message-box-content p {
    color: var(--sub-text-color);
}

/* Gaya Khusus Permainan */
#game-play-screen {
    background-color: var(--container-bg);
    border: 1px solid var(--card-border);
    box-shadow: 0 4px 6px -1px var(--card-shadow), 0 2px 4px -2px var(--card-shadow); /* Mirip shadow-md Tailwind */
}

/* Kartu Header Bab */
.chapter-header-card {
    background-color: var(--card-bg);
    border: 1px solid var(--card-border);
    box-shadow: 0 1px 3px 0 var(--card-shadow), 0 1px 2px 0 var(--card-shadow);
    color: var(--text-color);
    /* Transisi dihapus */
}
.chapter-header-card h2 {
    color: var(--title-color);
    text-shadow: none; /* Hapus text-shadow untuk tampilan yang lebih bersih di kartu */
}
.chapter-header-card .chapter-meta {
    color: var(--sub-text-color);
}

/* Konten Narasi dan Dialog */
.narrative-content p {
    color: var(--text-color);
}
.narrative-content .prolog-quote, .narrative-content .chapter-quote {
    color: var(--sub-text-color);
    border-left: 4px solid var(--card-border);
}

/* Kartu Dialog */
.character-dialogue-card {
    border: 1px solid var(--card-border);
    box-shadow: 0 1px 2px 0 var(--card-shadow);
    color: var(--text-color);
}
.mc-dialogue-card {
    background-color: var(--dialogue-mc-bg);
    border-color: var(--dialogue-mc-border);
}
.mc-dialogue-card strong.speaker-name {
    color: var(--dialogue-mc-speaker);
}
.other-dialogue-card {
    background-color: var(--dialogue-other-bg);
    border-color: var(--dialogue-other-border);
}
.other-dialogue-card strong.speaker-name {
    color: var(--dialogue-other-speaker);
}

/* Tampilan Sistem Dinamis */
#dynamic-systems-display {
    background-color: var(--system-display-bg);
    border: 1px dashed var(--system-display-border);
}
#dynamic-systems-display h3 {
    color: var(--system-title-color);
}
#dynamic-systems-display p {
    color: var(--sub-text-color);
}
#dynamic-systems-display .system-title {
    color: var(--system-title-color);
}
/* Pastikan ini juga menyesuaikan ke skala abu-abu */
.trust-update-item .positive { color: var(--positive-color); }
.trust-update-item .negative { color: var(--negative-color); }
.trust-update-item .neutral { color: var(--neutral-color); }
.text-green-500 { color: var(--positive-color) !important; }
.text-red-500 { color: var(--negative-color) !important; }
.text-amber-500 { color: var(--neutral-color) !important; }

/* Kartu Pilihan */
.choice-card {
    background-color: var(--choice-card-bg);
    border: 1px solid var(--choice-card-border);
    box-shadow: 0 2px 4px -1px var(--choice-card-shadow);
    color: var(--text-color);
}
.choice-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px var(--choice-card-shadow);
    background-color: var(--choice-card-bg); /* Pertahankan warna dasar, biarkan bayangan berubah */
}
.choice-card .choice-emote {
    color: var(--text-color); /* Pastikan warna emote konsisten */
}

/* Judul Animasi */
.animated-title {
    animation: bounceIn 1s ease-out;
}

@keyframes bounceIn {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(-20px);
    }
    50% {
        opacity: 1;
        transform: scale(1.05) translateY(5px);
    }
    70% {
        transform: scale(0.98) translateY(-2px);
    }
    100% {
        transform: scale(1) translateY(0);
    }
}

/* Penyesuaian responsif untuk layar kecil (breakpoint 'sm' Tailwind adalah 640px) */
@media (max-width: 639px) {
    body {
        padding: 1rem; /* p-4 */
    }
    .main-container {
        padding: 1.5rem; /* p-6 */
        border-radius: 1rem; /* rounded-xl */
    }
    h1 {
        font-size: 2.5rem; /* sm:text-4xl */
    }
    h2 {
        font-size: 1.5rem; /* sm:text-2xl */
    }
    .form-input, .form-select, .btn {
        padding: 0.75rem 1rem; /* py-3 px-4 */
        font-size: 1rem; /* text-base */
    }
    .radio-group {
        flex-direction: column;
        gap: 1rem;
    }
    .loading-indicator span {
        font-size: 1.125rem; /* text-lg */
    }
    .loading-indicator .spinner {
        width: 2.5rem; /* w-10 */
        height: 2.5rem; /* h-10 */
        border-width: 4px;
    }
    .story-card p, .character-card p, .summary-card p, .character-dialogue-card span {
        font-size: 0.875rem; /* text-sm */
    }
    .message-box-content {
        padding: 1.5rem; /* p-6 */
    }

    /* Penyesuaian untuk loading-card di layar kecil jika diperlukan */
    .loading-card {
        max-width: 90%; /* Sesuaikan max-width untuk layar lebih kecil */
    }
}


