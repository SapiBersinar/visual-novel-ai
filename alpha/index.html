<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cerita Komik Interaktif</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>
<body class="light-theme">
    <button id="theme-toggle" class="theme-toggle-button">
        <i class="fas fa-sun"></i>
        <span>Terang</span>
    </button>

    <div id="notification-container" class="notification-container"></div>

    <div id="api-key-screen" class="container screen">
        <h1>Selamat Datang!</h1>
        <p>Aplikasi ini membutuhkan Google Gemini API Key Anda untuk berfungsi. Silakan masukkan kunci API Anda di bawah ini:</p>
        <input type="text" id="api-key-input" placeholder="Masukkan Google Gemini API Key Anda">
        <button id="save-api-key" class="button button-primary">Simpan Kunci API</button>
        <p class="footer-text">Kunci API Anda akan disimpan secara lokal di browser Anda.</p>
    </div>

    <div id="main-screen" class="container screen hidden">
        <h1>Buat Cerita Baru</h1>
        <input type="text" id="story-title" placeholder="Judul Cerita (Contoh: Petualangan Naga Terakhir)">
        <textarea id="story-premise" placeholder="Premis Cerita Singkat (Contoh: Seorang ksatria muda memulai pencarian untuk menemukan naga terakhir yang tersisa dan mengakhiri tirani Raja Gelap.)"></textarea>
        
        <select id="genre-select" class="select-field">
            <option value="">Pilih Genre</option>
            <option value="Fantasy">Fantasi</option>
            <option value="Science Fiction">Fiksi Ilmiah</option>
            <option value="Mystery">Misteri</option>
            <option value="Horror">Horor</option>
            <option value="Thriller">Thriller</option>
            <option value="Romance">Romansa</option>
            <option value="Action">Aksi</option>
            <option value="Adventure">Petualangan</option>
            <option value="Historical Fiction">Fiksi Sejarah</option>
            <option value="Contemporary">Kontemporer</option>
            <option value="Dystopian">Distopia</option>
            <option value="Post-Apocalyptic">Pascamodern</option>
            <option value="Cyberpunk">Cyberpunk</option>
            <option value="Steampunk">Steampunk</option>
            <option value="Urban Fantasy">Fantasi Urban</option>
            <option value="Magical Realism">Realisme Magis</option>
            <option value="Superhero">Pahlawan Super</option>
            <option value="Slice of Life">Irisan Kehidupan</option>
            <option value="Comedy">Komedi</option>
            <option value="Tragedy">Tragedi</option>
        </select>

        <select id="subgenre-select" class="select-field hidden">
            <option value="">Pilih Subgenre (Opsional)</option>
        </select>

        <input type="number" id="num-stories" placeholder="Jumlah Cerita yang Akan Dibuat (1-5)" min="1" max="5" value="3">
        <button id="generate-stories-button" class="button button-primary">Buat Cerita</button>
        <button id="clear-api-key" class="button button-secondary">Hapus Kunci API</button>
    </div>

    <div id="story-selection-screen" class="container screen hidden">
        <h1>Pilih Cerita Anda</h1>
        <div id="stories-container">
            </div>
        <button id="regenerate-stories-button" class="button button-secondary">Buat Ulang Cerita</button>
        <button id="back-to-main-from-selection" class="button button-secondary">Kembali</button>
    </div>

    <div id="selected-story-display" class="container hidden">
        <h2>Cerita Terpilih:</h2>
        <p id="display-story-title"></p>
        <p id="display-story-premise"></p>
        <p class="genre" id="display-story-genre"></p>
        <p class="genre" id="display-story-subgenre"></p>
        <button id="start-character-creation-button" class="button button-primary">Lanjut ke Pembuatan Karakter</button>
        <button id="back-to-selection-button" class="button button-secondary">Kembali ke Pilihan Cerita</button>
    </div>

    <div id="character-creation-screen" class="container screen hidden">
        <h1>Buat Karakter Anda</h1>
        <div id="character-list-container">
            </div>
        <div id="character-options" class="button-group-spacing">
            <button id="generate-characters-button" class="button button-primary">Buat Karakter</button>
            <button id="start-game-button" class="button button-success hidden">Mulai Cerita!</button>
            <button id="back-to-story-selection-button" class="button button-secondary">Kembali</button>
        </div>
    </div>

    <div id="summary-screen" class="container screen hidden">
        <h1>Ringkasan Cerita dan Karakter</h1>
        <div class="summary-section">
            <h2>Detail Cerita</h2>
            <p><strong class="char-detail">Judul:</strong> <span id="summary-story-title"></span></p>
            <p><strong class="char-detail">Premis:</strong> <span id="summary-story-premise"></span></p>
            <p><strong class="char-detail">Genre:</strong> <span id="summary-story-genre"></span></p>
            <p><strong class="char-detail">Subgenre:</strong> <span id="summary-story-subgenre"></span></p>
        </div>
        <div class="summary-section">
            <h2>Karakter Utama</h2>
            <p><strong class="char-detail">Nama:</strong> <span id="summary-mc-name"></span> <span id="summary-mc-emoji"></span></p>
            <p><strong class="char-detail">Peran:</strong> <span id="summary-mc-role"></span></p>
            <p><strong class="char-detail">Deskripsi:</strong> <span id="summary-mc-description"></span></p>
        </div>
        <div class="summary-section">
            <h2>Karakter Pendukung</h2>
            <div id="summary-other-characters">
                </div>
        </div>
        <div class="button-group-spacing">
            <button id="confirm-start-game-button" class="button button-primary">Konfirmasi dan Mulai Game</button>
            <button id="back-to-character-creation-button" class="button button-secondary">Kembali ke Pembuatan Karakter</button>
        </div>
    </div>

    <div id="game-screen" class="container screen hidden">
        <div id="game-loading-overlay" class="hidden">
            <div class="spinner"></div>
            <span>Memuat bab...</span>
        </div>
        <div id="game-play-screen">
            <div class="game-controls">
                <button id="auto-read-button" class="button button-small button-secondary">‚ñ∂Ô∏è Baca Otomatis</button>
            </div>

            <div class="chapter-header-card">
                <h2 id="chapter-title"></h2>
                <p class="chapter-meta" id="chapter-number"></p>
                <p class="chapter-meta" id="chapter-setting"></p>
            </div>

            <div class="narrative-content" id="narrative-content">
                </div>

            <div id="dynamic-systems-display" class="hidden">
                <h3>üìù Pembaruan Sistem</h3>
                </div>
            
            <div id="choice-container">
                </div>
        </div>
    </div>

    <div id="game-over-screen" class="container screen hidden">
        <h1>Game Over!</h1>
        <p id="game-over-message" class="narrative-content"></p>
        <div class="summary-section">
            <h2>DNA Profil Karakter Utama</h2>
            <p id="game-over-dna-profile"></p>
        </div>
        <div class="button-group-spacing">
            <button id="restart-game-button" class="button button-primary">Main Lagi</button>
            <button id="back-to-main-from-game-over" class="button button-secondary">Kembali ke Menu Utama</button>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>

